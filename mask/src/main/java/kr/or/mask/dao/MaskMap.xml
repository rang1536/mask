<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mask">

<!-- login -->
<select id="login" parameterType="Map" resultType="kr.or.mask.domain.User">
	SELECT *
	  FROM MEMBER
	 WHERE ID = #{id}
	   AND PASS = #{pass} 
</select>

<!-- 일반공지 조회 -->
<select id="getNoticeList" parameterType="int" resultType="kr.or.mask.domain.Notice">
	SELECT *
	  FROM NOTICE
	 LIMIT #{startRow}, 10
</select>

<!-- 공지 총 카운트 조회 -->
<select id="getNoticeCnt" resultType="int">
	SELECT COUNT(*)
	  FROM NOTICE
	 WHERE TYPE = 1
</select>

<!-- =========================================================================================== -->
<!-- 조직도  -->
	<!-- 공통 -->
		<!-- 내정보 조회 -->
		<select id="getMyInfo" parameterType="String" resultType="kr.or.mask.domain.User">
			SELECT ID, PASS, NAME, PHONE, ZIPCODE, ADDR1, ADDR2, POINT
				   , DELIVERY_ZIPCODE, DELIVERY_ADDR1, DELIVERY_ADDR2
				   , RECOMMENDER, SPONSOR, AGENT, GRADE
				   , REGDATE, REGID, MODDATE, MODID
			  FROM MEMBER
			 WHERE ID= #{id}
		</select>
		
		<!-- 센터조회 -->
		<select id="getUpAgentNm" parameterType="String" resultType="kr.or.mask.domain.Agent">
			SELECT CODE, NAME, REGDATE, REGID, MODDATE, MODID
			  FROM AGENT
			 WHERE CODE = #{agent}
		</select>
	
		
<!-- 후원조직도 조회 -->
		
	<!-- 하위 후원인 조회 -->
	<select id="getUnderTreeSponsor" parameterType="String" resultType="kr.or.mask.domain.User">
		SELECT ID, PASS, NAME, PHONE, ZIPCODE, ADDR1, ADDR2, POINT
			   , DELIVERY_ZIPCODE, DELIVERY_ADDR1, DELIVERY_ADDR2
			   , RECOMMENDER, SPONSOR, AGENT, GRADE
			   , REGDATE, REGID, MODDATE, MODID
		  FROM MEMBER
		 WHERE SPONSOR = #{id} 
		 ORDER BY REGDATE
	</select>


<!-- 추천조직도 조회 -->
	
	<!-- 하위 추천인 조회 -->
	<select id="getUnderTreeRecommender" parameterType="String" resultType="kr.or.mask.domain.User" >
		SELECT ID, PASS, NAME, PHONE, ZIPCODE, ADDR1, ADDR2, POINT
			   , DELIVERY_ZIPCODE, DELIVERY_ADDR1, DELIVERY_ADDR2
			   , RECOMMENDER, SPONSOR, AGENT, GRADE
			   , REGDATE, REGID, MODDATE, MODID
		  FROM MEMBER
		 WHERE RECOMMENDER = #{id}
	</select>
	
</mapper>